# sample commands
#MODE <block number>
#DEBUG <debug level>
#MESSAGE message text to end of line
#BEGIN
#END
#DELAY <seconds>
#MOVE <left speed> <right speed>
#MMOVE <speed> <distance:inches> <timeout>
#TURN <degrees> <timeout>
#STRAIGHT <speed> <duration>
#CLAWOPEN
#CLAWCLOSE
#CLAWTOTOP
#CLAWTOBOTTOM
#CANUP
#RAISECANTOLOMID
#LOWERCANTOHIMID
#STACKUP <number of totes>
#STACKDOWN <number of totes>
#FRONTLOADTOTE <timeout>
#BACKLOADTOTE <timeout>
#FRONTSEEKTOTE <drive speed> <timeout>
#BACKSEEKTOTE <drive speed> <timeout>
#DEPOSITTOTESBACK
#TOTESHIFTFWD
#TOTESHIFTBCK
#TOTEPUSHBCK
#CANARMOPEN <delay>
#CANARMCLOSE <delay>
# unneeded - do not use, not fully tested
#SEEKTOTE <time:delay before looking for tote> <timeout>
#STARTTOTEUP
#TOTEEXTEND
#TOTERETRACT
#CUBEAUTO
#CLICKERUP
#CLICKERDOWN
#----------------------------------------------------------------
BEGIN
DEBUG 1
MESSAGE start script
# lowering the clicker gets it out of the can's way when we grab the first tote
# MrB turn this back to do full end-to-end match testing
#CLICKERDOWN
# grab the first can
CLAWCLOSE
DELAY .25
# lift to lower position, must be there before tote gets to back
RAISECANTOLOMID
# load the middle tote - can arm should be open already
# drives forward slowly with conveyor running till we see the tote at the front
MESSAGE load first tote
FRONTSEEKTOTE .3 6.0
# give the conveyor a chance to pull the tote in more
# MrB do we need this if we are doing FRONTLOADTOTE next?
DELAY .5
# pulls tote in till it hits the front sensor
FRONTLOADTOTE 4.0
# move to close proximity of second tote
MESSAGE head for second tote
STRAIGHT -0.4 0.50
# get loaded totes into the claw tab's way
TOTESHIFTBCK
DELAY .25
# use the can arm to push totes into claw with constant force 
# (using the conveyor caused it to bounce up and down)
CANARMCLOSE .6
DELAY .50
# lift the loaded tote
MESSAGE lift first tote
STACKUP 1
STRAIGHT -0.5 0.75
DELAY 0.75
# load the second tote
MESSAGE load second tote
BACKSEEKTOTE -.2 5.0
# move the can arm out a little so the second tote gets past the claw
CANARMOPEN .1
BACKLOADTOTE 6.0
# drive the robot towards the middle can
MESSAGE head for third tote
STRAIGHT 0.5 2.0
# lower claw to prepare to pick up two totes
STACKDOWN
DELAY 0.50
FRONTLOADTOTE 4.0
# get loaded totes into the claw tab's way
TOTESHIFTBCK
DELAY .25
# use the can arm to push totes into claw with constant force 
CANARMCLOSE .3
# make sure the arm is completely closed
DELAY 0.25
MESSAGE lift two totes
STACKUP 2
# MrB - is this delay necessary?
DELAY 1.0
DELAY 5.0
# past 3 delays should add up to about 2.5
# get rid of the can - will drive forward
##MESSAGE push can aside
##CANARMOPEN 2.0
##STRAIGHT .25 .75
# MrB - is this delay necessary?
##DELAY .3
#CLICKERUP
# drive to last tote whilst lifting
##STRAIGHT .6 1.0
##MESSAGE load third tote
##FRONTSEEKTOTE .3 4.0
##DELAY .5
##FRONTLOADTOTE 4.0
# turn towards auto zone
##MESSAGE head for auto zone
##TURN -90.0 5.0
# get totes out of the tab's way, then lift the can while turning
##TOTESHIFTFWD
##DELAY 0.50
# lower stack 
##STACKDOWN
# MrB - is this delay necessary?
##DELAY 0.5
# lift can to the top to get it out of the stack's way
##CLAWTOTOP 
# deposit totes, stay here to score the can
##STRAIGHT -0.75 1.5
##MESSAGE score totes
##DEPOSITTOTESBACK
#LOWERCANTOHIMID
CANLIFTSTOP
END